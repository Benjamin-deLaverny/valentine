<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Valentine ‚Äì Timing parfait</title>

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin-top: 50px;
    overflow: hidden;
  }

  .game {
    width: 320px;
    margin: 30px auto;
  }

  .bar {
    width: 100%;
    height: 14px;
    background: #ddd;
    border-radius: 10px;
    position: relative;
    overflow: hidden;
  }

  .zone {
    position: absolute;
    width: 24px;
    height: 100%;
    background: #7CFC90;
    left: 148px;
  }

  .cursor {
    position: absolute;
    width: 8px;
    height: 100%;
    background: #222;
    left: 0;
  }

  /* Boutons */
  .buttons {
    display: grid;
    grid-template-columns: repeat(3, auto);
    gap: 25px;
    justify-content: center;
    margin-top: 40px;
  }

  button {
    font-size: 18px;
    padding: 12px 24px;
    cursor: pointer;
  }

  #noBtn {
    font-size: 14px;
    padding: 6px 14px;
  }

  #fails {
    font-size: 28px;
    margin-top: 20px;
  }

  /* C≈ìurs */
  .heart {
    position: fixed;
    bottom: -20px;
    font-size: 26px;
    animation: floatUp 3s linear forwards;
    pointer-events: none;
  }

  @keyframes floatUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-100vh); opacity: 0; }
  }
</style>
</head>

<body>

<h1>Salut Ines</h1>
<p>Veux-tu √™tre ma valentine ?</p>
<p><b>Pour dire NON : clique pile au bon moment üòè</b></p>

<div class="game">
  <div class="bar">
    <div class="zone" id="zone"></div>
    <div class="cursor" id="cursor"></div>
  </div>
</div>

<div class="buttons">
  <button onclick="yesClick()">OUI</button>
  <button onclick="yesClick()">OUI</button>
  <button onclick="yesClick()">OUI</button>

  <button onclick="yesClick()">OUI</button>
  <button id="noBtn" onclick="noClick()">NON</button>
  <button onclick="yesClick()">OUI</button>

  <button onclick="yesClick()">OUI</button>
  <button onclick="yesClick()">OUI</button>
  <button onclick="yesClick()">OUI</button>
</div>

<div id="fails"></div>

<script>
  let pos = 0;
  let speed = 6.5; // Curseur rapide
  let direction = 1;
  let fails = 0;
  let playing = true;

  const cursor = document.getElementById("cursor");
  const zone = document.getElementById("zone");
  const noBtn = document.getElementById("noBtn");
  const failsDisplay = document.getElementById("fails");

  function moveCursor() {
    if (!playing) return;

    pos += speed * direction;
    if (pos <= 0 || pos >= 312) direction *= -1;
    cursor.style.left = pos + "px";

    requestAnimationFrame(moveCursor);
  }

  moveCursor();

  function noClick() {
    if (!playing) return;

    const c = cursor.getBoundingClientRect();
    const z = zone.getBoundingClientRect();

    if (!(c.left >= z.left && c.right <= z.right)) {
      fails++;
      showBrokenHeart();

      if (fails >= 10) {
        noBtn.style.display = "none";
        playing = false;
      }
    } else {
      playing = false;
      noBtn.disabled = true;
    }
  }

  function showBrokenHeart() {
    failsDisplay.innerHTML = "üíî".repeat(fails);
  }

  function yesClick() {
    spawnHearts();
  }

  function spawnHearts() {
    for (let i = 0; i < 18; i++) {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.innerHTML = "‚ù§Ô∏è";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDuration = (2 + Math.random() * 2) + "s";
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 4000);
    }
  }
</script>

</body>
</html>
